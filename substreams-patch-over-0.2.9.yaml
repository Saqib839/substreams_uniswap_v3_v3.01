specVersion: v0.1.0
package:
  name: uniswap_v3
  version: v0.2.10
  url: https://github.com/streamingfast/substreams-uniswap-v3
  image: ./sf_substreams_uniswap.jpeg
  doc: |
    Official StreamingFast implementation of Uniswap v3 Substreams. Underlying Substreams modules
    allow for composability. This Substreams contains 22 modules. Mappers are used to extract
    key structures which are either passed down to other modules or used to emit entity changes.
    Stores are used as temporary storage to hold/pass down key data to mappers, such as ETH price
    in USD. These substreams modules compose all the things to build up the Uniswap v3 Substreams.
    See individual modules docs for more information.

imports:
  entity: https://github.com/streamingfast/substreams-entity-change/releases/download/v1.1.0/substreams-entity-change-v1.1.0.spkg
  uni_v0_2_9: https://github.com/streamingfast/substreams-uniswap-v3/releases/download/v0.2.9/substreams.spkg

protobuf:
  files:
    - uniswap/v1/uniswap.proto
  importPaths:
    - ./proto

binaries:
  default:
    type: wasm/rust-v1
    file: target/wasm32-unknown-unknown/release/substreams_uniswap_v3.wasm

network: mainnet

modules:
  - name: graph_out
    kind: map
    initialBlock: 12369621
    inputs:
      - source: sf.substreams.v1.Clock
      - store: uni_v0_2_9:store_pool_count
        mode: deltas
      - store: uni_v0_2_9:store_total_tx_counts
        mode: deltas
      - store: uni_v0_2_9:store_swaps_volume
        mode: deltas
      - store: uni_v0_2_9:store_derived_factory_tvl
        mode: deltas
      - store: uni_v0_2_9:store_eth_prices
        mode: deltas
      - map: uni_v0_2_9:map_extract_data_types
      - map: uni_v0_2_9:map_pools_created
      - store: uni_v0_2_9:store_pool_sqrt_price
        mode: deltas
      - store: uni_v0_2_9:store_pool_sqrt_price
      - store: uni_v0_2_9:store_pool_liquidities
        mode: deltas
      - store: uni_v0_2_9:store_token_tvl
        mode: deltas
      - store: uni_v0_2_9:store_prices
        mode: deltas
      - store: uni_v0_2_9:store_prices
      - store: uni_v0_2_9:store_tokens
      - store: uni_v0_2_9:store_tokens_whitelist_pools
        mode: deltas
      - store: uni_v0_2_9:store_derived_tvl
        mode: deltas
      - store: uni_v0_2_9:store_ticks_liquidities
        mode: deltas
      - store: uni_v0_2_9:store_total_tx_counts
      - store: uni_v0_2_9:store_eth_prices
      - store: uni_v0_2_9:store_positions
      - store: uni_v0_2_9:store_min_windows
        mode: deltas
      - store: uni_v0_2_9:store_max_windows
        mode: deltas
    output:
      type: proto:sf.substreams.entity.v1.EntityChanges
    doc: |
      `EntityChanges` emitted out for all the entities defined in the `schema.graphql` for the Uniswap v3 Subgraph.
